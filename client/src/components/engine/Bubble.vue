<template>
    <g id="bubble" transform="translate(300 165) scale(0.5)">
        <path d="M783.5 257.215C783.5 410.305 751.786 610.114 437.5 587C241.281 587 126.472 337.127 0 288.847C9.17882 280.499 -6.9711 278.452 10.8167 257.215C131.464 261.377 245.851 0 402.713 0C598.933 0 799 106 783.5 257.215Z" fill="#E1E1E1" fill-opacity="0.73"/>
        <path d="M698 168.948C698 217.085 621.666 168.948 489.029 185.135C356.393 201.322 320.215 168.026 312 128.48C312 80.3425 357.009 27 430.561 27C504.113 27 698 120.81 698 168.948Z" fill="#F7F7F7" fill-opacity="0.62"/>
        <path d="M292.735 136.115C303.42 152.747 279.755 205.096 255 221C230.245 236.903 158.185 258.632 147.5 242C136.815 225.368 203.81 150.7 228.565 134.796C253.32 118.892 282.05 119.483 292.735 136.115Z" fill="#F7F7F7" fill-opacity="0.62"/>
    </g>
    
    <g id="star" transform="translate(320 245)" fill="none">
        <path d="M9.22428 67.9916C51.2985 62.9558 65.9679 21.7588 68 0.5C68 38.4771 100.944 57.9351 125.312 65.4577C129.324 65.8103 133.552 66.7894 138 68.5C134.271 67.8874 129.947 66.8884 125.312 65.4577C91.7978 62.5121 73.3585 103.28 68 126.5C68 79.5316 32.9247 68.0801 9.22428 67.9916C6.43782 68.3251 3.53115 68.5 0.5 68.5C3.13554 68.1681 6.0798 67.9798 9.22428 67.9916Z" fill="#675696"/>
        <path d="M68 0.5C65.8333 23.1667 49.3 68.5 0.5 68.5C23 65.6667 68 73.3 68 126.5C74 100.5 96.4 52.5 138 68.5C114.667 64.6667 68 45.7 68 0.5Z" stroke="#675696"/>
    </g>
    <g id="star" transform="translate(560 295)" fill="none">
        <path d="M9.22428 67.9916C51.2985 62.9558 65.9679 21.7588 68 0.5C68 38.4771 100.944 57.9351 125.312 65.4577C129.324 65.8103 133.552 66.7894 138 68.5C134.271 67.8874 129.947 66.8884 125.312 65.4577C91.7978 62.5121 73.3585 103.28 68 126.5C68 79.5316 32.9247 68.0801 9.22428 67.9916C6.43782 68.3251 3.53115 68.5 0.5 68.5C3.13554 68.1681 6.0798 67.9798 9.22428 67.9916Z" fill="#675696"/>
        <path d="M68 0.5C65.8333 23.1667 49.3 68.5 0.5 68.5C23 65.6667 68 73.3 68 126.5C74 100.5 96.4 52.5 138 68.5C114.667 64.6667 68 45.7 68 0.5Z" stroke="#675696"/>
    </g>
    
    <path id="star" transform="translate(400 195)" d="M2 42.5C22.6474 37.7674 30.655 29.115 37 1C37.9766 26.6493 41.4984 38.4499 67 42.5C45.0505 47.3066 39.248 56.7317 37 82C33.1646 61.5439 26.9585 52.1288 2 42.5Z" fill="#675696" stroke="#675696"/>
    <path id="star" transform="translate(490 265)" d="M2 42.5C22.6474 37.7674 30.655 29.115 37 1C37.9766 26.6493 41.4984 38.4499 67 42.5C45.0505 47.3066 39.248 56.7317 37 82C33.1646 61.5439 26.9585 52.1288 2 42.5Z" fill="#675696" stroke="#675696"/>
    <path id="star" transform="translate(570 205)" d="M2 42.5C22.6474 37.7674 30.655 29.115 37 1C37.9766 26.6493 41.4984 38.4499 67 42.5C45.0505 47.3066 39.248 56.7317 37 82C33.1646 61.5439 26.9585 52.1288 2 42.5Z" fill="#675696" stroke="#675696"/>
    <path id="star" transform="translate(660 255)" d="M2 42.5C22.6474 37.7674 30.655 29.115 37 1C37.9766 26.6493 41.4984 38.4499 67 42.5C45.0505 47.3066 39.248 56.7317 37 82C33.1646 61.5439 26.9585 52.1288 2 42.5Z" fill="#675696" stroke="#675696"/>
    <path id="star" transform="translate(490 265)" d="M2 42.5C22.6474 37.7674 30.655 29.115 37 1C37.9766 26.6493 41.4984 38.4499 67 42.5C45.0505 47.3066 39.248 56.7317 37 82C33.1646 61.5439 26.9585 52.1288 2 42.5Z" fill="#675696" stroke="#675696"/>
    <path id="star" transform="translate(510 165)" d="M2 42.5C22.6474 37.7674 30.655 29.115 37 1C37.9766 26.6493 41.4984 38.4499 67 42.5C45.0505 47.3066 39.248 56.7317 37 82C33.1646 61.5439 26.9585 52.1288 2 42.5Z" fill="#675696" stroke="#675696"/>
      
    <g id="star" transform="translate(480 165)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(480 325)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(450 245)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(645 245)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(550 305)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(620 175)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(420 330)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
    <g id="star" transform="translate(655 305)">
        <path d="M2 21.4938C11.8472 19.1567 15.6662 14.8839 18.6923 1C19.1581 13.6663 20.8377 19.4938 33 21.4938C22.5318 23.8675 19.7644 28.5218 18.6923 41C16.8631 30.8982 13.9033 26.2488 2 21.4938Z" fill="#B2ABC4" stroke="#B2ABC4"/>
    </g>
</template>
    
<script setup>
    import gsap from 'gsap';
    import { onMounted } from 'vue';
    const emit = defineEmits(['bubblePopped']);

    const onFinish = () => {
        emit('bubblePopped', true);
    };

    onMounted(() => {
        gsap.fromTo("#bubble", 
        {
            scale:0.01,
            y:"305"
        }, 
        {
            scale:0.5,
            y:"165",
            duration: 4,
            delay: 2
        })
        .then(()=>{
            gsap.to("#bubble",{ opacity:0})
            gsap.fromTo("#star",
            {
                opacity:0
            },
            {
                opacity:1,
                duration:2
            })
            gsap.fromTo("#star",
            {
                rotation:-5
            },
            {
                rotation:5,
                duration:0.9,
                repeat:3,
                yoyo:true
            })
        })
        .then(()=>{
            gsap.fromTo("#star",
            {
                opacity:1
            },
            {
                opacity:0,
                duration:2
            })
            onFinish()
        });
    })

</script>
    
<style lang="scss" scoped>
    #star {
        opacity:0
    }
</style>